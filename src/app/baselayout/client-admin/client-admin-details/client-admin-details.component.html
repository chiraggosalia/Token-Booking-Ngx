<nb-flip-card [flipped]="flipped" [showToggleButton]="false" *ngIf="dataAvailable">
  <nb-card-front>
    <nb-card status="success" >
      <nb-card-header>{{clientName}}</nb-card-header>
      <nb-card-body>
        <p *ngFor="let error of errors" style="color: red"><b>{{error}}</b></p>
        <h3>{{filterValue.selectedDay}}'s sessions</h3>
        <nb-accordion>
          <nb-accordion-item *ngFor="let session of adminSummary?.adminSessionSummaryList | adminDateFilter:filterValue">
            <nb-accordion-item-header>
              {{session.fromTime + " " + session.toTime }}
            </nb-accordion-item-header>
            <nb-accordion-item-body>
              <p>Available tokens {{session.availableTokens}}</p>
              <p>Booked tokens {{session.bookedTokens}}</p>
              <p>Submitted tokens {{session.submittedTokens}}</p>
              <button nbButton *ngIf="session.status=='ACTIVE'" [status]="success" (click)="openConfirmation(session.sessionId,'START')">Start
              </button>
              <button nbButton *ngIf="session.status=='INPROGRESS'" [status]="success" [routerLink]="['/base/admin/activesession',session.sessionId]">Continue
              </button>
            </nb-accordion-item-body>
          </nb-accordion-item>
        </nb-accordion>
      </nb-card-body>
      <nb-card-footer>
        <input nbInput
               placeholder="Form Picker"
               [nbDatepicker]="formpicker" [(ngModel)]="filterValue.selectedDate"
               (ngModelChange)="setFilerDate()">
        <nb-datepicker #formpicker [min]="minDate" [max]="maxDate"></nb-datepicker>
      </nb-card-footer>
    </nb-card>
  </nb-card-front>
  <nb-card-back>
    <nb-card status="info">
      <nb-card-header>Confirmation</nb-card-header>
      <nb-card-body>
        <p *ngIf="selectedAction=='START'">Do you want to start the session?</p>
        <p *ngIf="selectedAction=='CANCEL'">Do you want to cancel the session?</p>
        <p *ngIf="selectedAction=='COMPLETE'">Do you want to complete the session?</p>
      </nb-card-body>
      <nb-card-footer>
        <button nbButton status="primary" size="medium" (click)="OK()"
                [nbSpinner]="loading" nbSpinnerStatus="success" nbSpinnerSize="medium">
          Yes
        </button>
        <button class="button-border" nbButton status="primary" size="medium" (click)="flipToggle()">
          No
        </button>
      </nb-card-footer>
    </nb-card>
  </nb-card-back>
</nb-flip-card>
